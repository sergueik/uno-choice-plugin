<?xml version="1.0"?>
<!DOCTYPE html>
<html>
  <head>
    <title>Jenkins</title>
    <link rel="stylesheet" type="text/css" href="/static/b547851b/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="/static/b547851b/css/color.css"/>
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/static/b547851b/favicon.ico"/>
    <link rel="stylesheet" href="qunit-latest.css"/>
    <script>var isRunAsTest=false; var rootURL=""; var resURL="/static/b547851b";</script>
    <script>crumb.init("", "");</script>
    <meta name="ROBOTS" content="INDEX,NOFOLLOW"/>
    <link rel="stylesheet" type="text/css" href=""/>
    <script src="" type="text/javascript"/>
  </head>
  <body id="jenkins" data-version="jenkins-1.568" class="yui-skin-sam jenkins-1.568">
    <div id="qunit"/>
    <div id="qunit-fixture"/>
<!-- 
    <script src="qunit-latest.js"/>
-->
    <script src="jquery-latest.js"/>

    <script src="../../../main/resources/org/biouno/unochoice/stapler/unochoice/unochoice.js"/>
<!-- 
    <script src="blanket.min.js"/>

    <script src="../unochoiceTest.js"/>
 -->
    <script>var Q=jQuery.noConflict()</script>
    <h1>Project BASIC_TEST_6</h1>
    <p>This build requires parameters:</p>
    <form name="parameters" action="build?delay=0sec" method="post">
      <table border="1" width="100%" class="parameters">
        <tbody>
          <tr>
            <td class="setting-leftspace"> </td>
            <td class="setting-name">Gender</td>
            <td class="setting-main">
              <div name="parameter">
                <input name="name" value="Gender" type="hidden"/>
                <select name="value">
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select>
              </div>
            </td>
          </tr>
          <tr class="validation-error-area">
            <td colspan="2"/>
            <td/>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <td class="setting-leftspace"> </td>
            <td class="setting-name">LetterSet</td>
            <td class="setting-main">
              <div description="" name="parameter">
                <input name="name" value="LetterSet" type="hidden"/>
                <div id="ecp_LetterSet" style="float:left; overflow-y:auto; padding-right:25px">
                  <table id="tbl_ecp_LetterSet">
                    <tr id="ecp_LetterSet_0" style="white-space:nowrap">
                      <td>
                        <input json="X" name="value" value="X" class=" " type="checkbox" checked="true"/>
                        <label class="attach-previous">X</label>
                      </td>
                    </tr>
                    <tr id="ecp_LetterSet_1" style="white-space:nowrap">
                      <td>
                        <input json="Y" name="value" value="Y" class=" " type="checkbox" checked="true"/>
                        <label class="attach-previous">Y</label>
                      </td>
                    </tr>
                    <tr id="ecp_LetterSet_2" style="white-space:nowrap">
                      <td>
                        <input json="Z" name="value" value="Z" class=" " type="checkbox"/>
                        <label class="attach-previous">Z</label>
                      </td>
                    </tr>
                  </table>
                </div>
                <script><![CDATA[
(function() {
  			var f = function() {
	  			var height = 0;
	  			var maxCount = 3;
	  			if(maxCount > 3) {
	  				maxCount = 3;
	  			}
	  			
	  			if(maxCount > 0 && document.getElementById("ecp_LetterSet_0").offsetHeight !=0) {
		  			for(var i=0; i< maxCount; i++) {
		  				height += document.getElementById("ecp_LetterSet_" + i).offsetHeight + 3;
		  			}
		  		}
	  			else {
	  				height = maxCount * 25.5;
	  			}
	  			height = Math.floor(height);
	  			document.getElementById("ecp_LetterSet").style.height = height + "px";
	  		};
	  		
	  		f();
  		})();
]]></script>
              </div>
            </td>
          </tr>
          <tr class="validation-error-area">
            <td colspan="2"/>
            <td/>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <td class="setting-leftspace"> </td>
            <td class="setting-name">DEBUG</td>
            <td class="setting-main">
              <div name="parameter">
                <input name="name" value="DEBUG" type="hidden"/>
                <input name="value" class=" " type="checkbox" checked="true"/>
              </div>
            </td>
          </tr>
          <tr class="validation-error-area">
            <td colspan="2"/>
            <td/>
          </tr>
        </tbody>
        <tbody>
          <tr>
            <td class="setting-leftspace"> </td>
            <td class="setting-name">RadioButtonInput</td>
            <td class="setting-main">
              <div description="" name="parameter">
                <input name="name" value="RadioButtonInput" type="hidden"/>
                <div id="ecp_RadioButtonInput" style="float:left; overflow-y:auto; padding-right:25px">
                  <table id="tbl_ecp_RadioButtonInput">
                    <tr id="ecp_RadioButtonInput_0" style="white-space:nowrap">
                      <td>
                        <input name="RadioButtonInput.value" value="1" type="radio"/>
                        <label class="attach-previous">1</label>
                      </td>
                    </tr>
                    <tr id="ecp_RadioButtonInput_1" style="white-space:nowrap">
                      <td>
                        <input name="RadioButtonInput.value" value="2" type="radio" checked="true"/>
                        <label class="attach-previous">2</label>
                      </td>
                    </tr>
                    <tr id="ecp_RadioButtonInput_2" style="white-space:nowrap">
                      <td>
                        <input name="RadioButtonInput.value" value="3" type="radio"/>
                        <label class="attach-previous">3</label>
                      </td>
                    </tr>
                  </table>
                </div>
                <script><![CDATA[
(function() {
  			var f = function() {
	  			var height = 0;
	  			var maxCount = 3;
	  			if(maxCount > 3) {
	  				maxCount = 3;
	  			}
	  			
	  			if(maxCount > 0 && document.getElementById("ecp_RadioButtonInput_0").offsetHeight !=0) {
		  			for(var i=0; i< maxCount; i++) {
		  				height += document.getElementById("ecp_RadioButtonInput_" + i).offsetHeight + 3;
		  			}
		  		}
	  			else {
	  				height = maxCount * 25.5;
	  			}
	  			height = Math.floor(height);
	  			document.getElementById("ecp_RadioButtonInput").style.height = height + "px";
	  		};
	  		
	  		f();
  		})();
]]></script>
              </div>
            </td>
          </tr>
          <tr class="validation-error-area">
            <td colspan="2"/>
            <td/>
          </tr>
        </tbody>
        <tbody bgcolor="red">
          <style type="text/css">
  .js-loading-overlay {
  
  position:absolute;
  top:0; bottom:0;
  left:0; right:0;
  
  z-index:199;
  
  background:#fff;
  opacity:0.5;
  
  border-radius: inherit;
  }
  </style>
          <script src="../../../main/resources/org/biouno/unochoice/stapler/unochoice/unochoice.js" type="text/javascript"/>
          <tr>
            <td class="setting-leftspace"> </td>
            <td class="setting-name">Profession</td>
            <td class="setting-main">
              <div id="choice-parameter-1888311918417" description="" name="parameter">
                <input name="name" value="Profession" type="hidden"/>
                <select name="value"/>
              </div>
            </td>
          </tr>
          <tr class="validation-error-area">
            <td colspan="2"/>
            <td/>
            <script type="text/javascript"><![CDATA[
    // source, references table
    var referencedParameters = Array();
    // add the element we want to monitor
        referencedParameters.push("Gender");// add the element we want to monitor
        referencedParameters.push("DEBUG");// add the element we want to monitor
        referencedParameters.push("LetterSet");// add the element we want to monitor
        referencedParameters.push("RadioButtonInput");
    
    if (window.makeStaplerProxy) {
        window.__old__makeStaplerProxy = window.makeStaplerProxy;
        window.makeStaplerProxy = UnoChoice.makeStaplerProxy2;
    }
    var cascadeChoiceParameter = makeStaplerProxy('/$stapler/bound/5559e2d1-ab72-4f27-aaf9-9a0738e6a590','96a799a2-b1f1-4377-b3ce-ca47e1241e3f',['doUpdate','getChoicesForUI']); // Create Jenkins proxy
    if (window.makeStaplerProxy) {
        window.makeStaplerProxy = window.__old__makeStaplerProxy;
    }
    // find the cascade parameter element
    var parentDiv = jQuery('#choice-parameter-1888311918417');
    var parameterHtmlElement = parentDiv.find('DIV');
    if (!parameterHtmlElement || parameterHtmlElement.length == 0) {
        console.log('Could not find element by name, perhaps it is a DIV?');
        parameterHtmlElement = parentDiv.find('*[name="value"]');
    }
    if (parameterHtmlElement && parameterHtmlElement.get(0)) {
        var cascadeParameter = new UnoChoice.CascadeParameter('Profession', parameterHtmlElement.get(0), 'choice-parameter-1888311918417', cascadeChoiceParameter);
        UnoChoice.cascadeParameters.push(cascadeParameter);
        // filter
        
        
        for (var i  = 0; i < referencedParameters.length ; ++i) {
            var parameterElement = null;
            // FIXME: review the block below
            var divs = jQuery('div[name="parameter"]');
            for (var j = 0; j < divs.length ; j++) {
                var div = divs[j];
                var hiddenNames = jQuery(div).find('input[name="name"]');
                if (hiddenNames[0].value == referencedParameters[i]) {
                    var children = div.children;
                    for (var k = 0; k < children.length; ++k) {
                        var child = children[k];
                        if (child.getAttribute('name') == 'value') {
                            parameterElement = child;
                            break;
                        } else if (child.tagName == 'DIV') {
                            var subValues = jQuery(child).find('input[name="value"]');
                            if (subValues && subValues.get(0)) {
                                parameterElement = child;
                                break;
                            } else {
                                parameterElement = child;
                                break;
                            }
                        } else if (child.getAttribute('type') == 'file') {
                            parameterElement = child;
                            break;
                        }
                    }
                }
            }
            
            new UnoChoice.ReferencedParameter(referencedParameters[i], parameterElement, cascadeParameter);
        }
        
        // call update methods in Java passing the HTML values
        console.log('Updating cascade of parameter [Profession] ...');
        cascadeParameter.update();
    } else {
        console.log('Parameter error: Missing parameter [choice-parameter-1888311918417] HTML element!');
    }
    ]]></script>
          </tr>
        </tbody>
        <tr>
          <td colspan="3">
            <input type="hidden" name="statusCode" value="303"/>
            <input type="hidden" name="redirectTo" value="."/>
            <input name="Submit" value="Build" class="submit-button" type="submit"/>
          </td>
        </tr>
      </table>
    </form>
  </body>
</html>
